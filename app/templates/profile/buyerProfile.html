{% block main_content %}
    <div class="signup-img-container center">
        <img src="/static/img/pppointed.svg" class="img-non-logo"
             alt="a dashed arrow with curves">
    </div>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Profile Setup</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles/profile.css') }}">
    </head>
    <body>
   <div class="profile-setup-container center">
    <div class="form-container">
        <h1>Buyer Profile</h1>
        <h5>Update your information below</h5>
        <!-- Change Password Section -->
        <form method="POST" action="{{ url_for('profile.update_password') }}">
            <fieldset>
                <legend>Change Password</legend>
                <div class="mb-3">
                    <label for="oldPasswordInput" class="form-label">Old Password</label>
                    <input type="password" name="old_password" class="form-control" id="oldPasswordInput"
                           placeholder="Enter your old password" required>
                </div>
                <div class="mb-3">
                    <label for="newPasswordInput" class="form-label">New Password</label>
                    <input type="password" name="new_password" class="form-control" id="newPasswordInput"
                           placeholder="Enter your new password" required>
                </div>
                <div class="mb-3">
                    <label for="confirmPasswordInput" class="form-label">Confirm New Password</label>
                    <input type="password" name="confirm_password" class="form-control" id="confirmPasswordInput"
                           placeholder="Re-enter your new password" required>
                </div>
                <button type="submit" class="btn btn-primary">Update Password</button>
            </fieldset>
        </form>

        <!-- Credit Card Section -->
        <form method="POST" action="{{ url_for('profile.update_credit_card') }}">
            <fieldset>
                <legend>Update Credit Card Information</legend>
                <div class="mb-3">
                    <label for="creditCardNumberInput" class="form-label">Card Number</label>
                    <input type="text" name="credit_card_num" class="form-control" id="creditCardNumberInput"
                           placeholder="1234 5678 9012 3456" pattern="\d{16}" title="Enter a valid 16-digit card number" required>
                </div>
                <div class="mb-3">
                    <label for="expirationMonthInput" class="form-label">Expiration Month</label>
                    <input type="number" name="expire_month" class="form-control" id="expirationMonthInput"
                           placeholder="MM" min="1" max="12" required>
                </div>
                <div class="mb-3">
                    <label for="expirationYearInput" class="form-label">Expiration Year</label>
                    <input type="number" name="expire_year" class="form-control" id="expirationYearInput"
                           placeholder="YYYY" min="2023" required>
                </div>
                <div class="mb-3">
                    <label for="securityCodeInput" class="form-label">Security Code</label>
                    <input type="number" name="security_code" class="form-control" id="securityCodeInput"
                           placeholder="123" pattern="\d{3}" title="Enter a valid 3-digit security code" required>
                </div>
                <div class="mb-3">
                    <label for="cardTypeInput" class="form-label">Card Type</label>
                    <select name="card_type" class="form-control" id="cardTypeInput" required>
                        <option value="Visa">Visa</option>
                        <option value="MasterCard">MasterCard</option>
                        <option value="Discover">Discover</option>
                        <option value="American Express">American Express</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Update Credit Card</button>
            </fieldset>
        </form>

        <!-- Address Section -->
        <form method="POST" action="{{ url_for('profile.update_address') }}">
            <fieldset>
                <legend>Update Address Information</legend>
                <div class="mb-3">
                    <label for="streetNumInput" class="form-label">Street Number</label>
                    <input type="number" name="street_num" class="form-control" id="streetNumInput"
                           placeholder="123" required>
                </div>
                <div class="mb-3">
                    <label for="streetNameInput" class="form-label">Street Name</label>
                    <input type="text" name="street_name" class="form-control" id="streetNameInput"
                           placeholder="Main St" required>
                </div>
                <div class="mb-3">
                    <label for="zipInput" class="form-label">ZIP Code</label>
                    <input type="number" name="zipcode" class="form-control" id="zipInput"
                           placeholder="12345" required>
                </div>
                <div class="mb-3">
                    <label for="cityInput" class="form-label">City</label>
                    <input type="text" name="city" class="form-control" id="cityInput"
                           placeholder="Your City" required>
                </div>
                <div class="mb-3">
                    <label for="stateInput" class="form-label">State</label>
                    <input type="text" name="state" class="form-control" id="stateInput"
                           placeholder="Your State" required>
                </div>
                <button type="submit" class="btn btn-primary">Update Address</button>
            </fieldset>
        </form>

        <!-- Additional Profile Options -->
        <form method="POST" action="{{ url_for('profile.logOut') }}">
            <button type="submit" class="btn btn-secondary">Log Out</button>
        </form>
        <form method="POST" action="{{ url_for('profile.delete_user') }}">
            <button type="submit" class="btn btn-danger">Delete User</button>
        </form>
        <form method="POST" action="{{ url_for('profile.switch_account_type') }}">
            <button type="submit" class="btn btn-warning">Switch Account Type</button>
        </form>

                {% if password_match_failed %}
                    <p style="color: red;">Passwords do not match! </p>
                {% endif %}
                {% if password_requirements %}
                    <p style = "color: red;">Password doesn't meet requirements!.</p>
                    <p style="color: red;">Passwords must have at least 1 capital and longer than 8 characters! </p></p>
                {% endif %}
                {% if oldMatchingPassword %}
                    <p style="color: red;">Old and New Passwords can't be the same!</p>
                {% endif %}
                <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
        </div>
    </div>
</body>
</html>